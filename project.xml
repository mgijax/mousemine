<!DOCTYPE bio [
<!ENTITY mm_data "/var/lib/jenkins/etl_build/etl/output">
]>

<project type="bio">
	
  <property name="target.model" value="genomic"/>
  <property name="source.location" location="../bio/sources/"/>
  <property name="source.location" location="../bio/sources/mgi/"/>
  <property name="common.os.prefix" value="common"/>
  <property name="intermine.properties.file" value="mousemine.properties"/>
  <property name="default.intermine.properties.file" location="../default.intermine.integrate.properties"/>
  <property name="dataLoader.allowMultipleErrors" value="true"/>

  <sources>

    <!-- For proper merge behavior, the Uniprot load must run before mgi-base, and it must not
         create genes or gene/protein relationships.
    -->
    <source name="uniprot" type="uniprot" >
	<property name="uniprot.organisms" value="10090"/>
	<property name="src.data.dir" location="&mm_data;/uniprot/latest/"/>
	<property name="creategenes" value="false"/>
	<property name="allowduplicates" value="true"/>
	<property name="loadfragments" value="true"/>
	<property name="loadtrembl" value="true"/>
	</source>

    <source name="uniprot-fasta" type="fasta">
	<property name="fasta.taxonId" value="10090"/>
	<property name="fasta.className" value="org.intermine.model.bio.Protein"/>
	<property name="fasta.classAttribute" value="primaryAccession"/>
	<property name="fasta.dataSetTitle" value="UniProt data set"/>
	<property name="fasta.dataSourceName" value="UniProt"/>
	<property name="src.data.dir" location="&mm_data;/uniprot-isoforms/latest/"/>
	<property name="fasta.includes" value="uniprot_sprot_varsplic.fasta"/>
	<property name="fasta.sequenceType" value="protein" />
	<property name="fasta.loaderClassName" value="org.intermine.bio.dataconversion.UniProtFastaLoaderTask"/>
	</source>

    <source name="uniprot-keywords" type="uniprot-keywords">
	<property name="src.data.dir" location="&mm_data;/uniprot-keywords/latest/"/>
	<property name="src.data.dir.includes" value="keywlist.xml"/>
	</source>

    <source name="interpro" type="interpro">
	<property name="src.data.dir" location="&mm_data;/interpro/latest/"/>
	</source>

    <!-- has to be after UniProt because only loads protein domains for loaded proteins -->
    <source name="protein2ipr" type="protein2ipr">
	<property name="src.data.dir" location="&mm_data;/protein2ipr/latest/"/>
	<property name="src.data.dir.includes" value="protein2ipr.dat"/>
	<property name="protein2ipr.organisms" value="10090"/>
	</source>

    <source name="reactome" type="reactome">
	<property name="src.data.dir" location="&mm_data;/reactome/latest/" />
	<property name="reactome.organisms" value="10090" />
	<property name="reactome.datasourcename" value="Reactome"/>
	<property name="reactome.datasetname" value="Reactome data set"/>
	</source>

    <source name="fmfd-fly" type="fmfd" >
        <property name="src.data.file" value="&mm_data;/flymine/latest/features.xml" />
	</source>

    <source name="fmfd-rat" type="fmfd" >
        <property name="src.data.file" value="&mm_data;/ratmine/latest/features.xml" />
	</source>

    <source name="fmfd-worm" type="fmfd" >
        <property name="src.data.file" value="&mm_data;/wormmine/latest/features.xml" />
	</source>

    <source name="fmfd-yeast" type="fmfd" >
        <property name="src.data.file" value="&mm_data;/yeastmine/latest/features.xml" />
	</source>

    <source name="fmfd-zebrafish" type="fmfd" >
        <property name="src.data.file" value="&mm_data;/zebrafishmine/latest/features.xml" />
	</source>

    <source name="data-model" type="data-model">
    </source>
    <!-- data-model contains all the mgi base class defintions
         this allows mgi-base to be excluded from a build
         which will significantly decrease the build time
         BUT mousemine/dbmodel/resources/genomic_priorities.properties
         needs to have mgi-base removed for the build to work
    -->

    <source name="mgi-base" type="mgi-base" >
	<property name="src.data.dir" value="&mm_data;/mgi-base/latest/"/>
    </source>

    <source name="mgi-do" type="mgi-do" >
	<property name="src.data.file" 
	          value="&mm_data;/do/latest/DiseaseOntology.obo"/>
    </source>

    <source name="mgi-mp" type="mgi-mp" >
	<property name="src.data.file" 
	          value="&mm_data;/mp/latest/MammalianPhenotype.obo"/>
    </source>

    <source name="mgi-go" type="mgi-go" >
	<property name="src.data.file" 
	          value="&mm_data;/go/latest/GeneOntology.obo"/>
    </source>

    <source name="gxd-anatomy" type="gxd-anatomy" >
        <property name="converter.class" 
		  value="org.intermine.bio.dataconversion.EmapaOboConverter"/>
        <property name="src.data.file"
                  value="&mm_data;/emapa/latest/EMAPA.obo"/>
    </source>

    <source name="so" type="so" >
	<property name="src.data.file" location="../../bio/sources/so/so.obo"/>
    </source>

    <source name="psi-mi" type="psi-mi-ontology" >
	<property name="src.data.file" value="&mm_data;/psi-mi/latest/psi-mi.obo"/>
	</source>

    <source name="biogrid" type="biogrid">
	<property name="src.data.dir" location="&mm_data;/biogrid/latest"/>
	<property name="src.data.dir.includes" value="*psi25.xml"/>
	<property name="biogrid.organisms" value="10090 9606"/>
	</source>

    <source name="psi-intact" type="psi">
	<property name="src.data.dir" location="&mm_data;/intact/latest/"/>
	<property name="intact.organisms" value="10090 9606"/>
	</source>

<!-- The MGI catalog of mouse genome features (gene models).
    Deferred until a later release.

    <source name="mgi-gff" type="mgi-gff">
      <property name="gff3.taxonId" value="10090"/>
      <property name="gff3.seqDataSourceName" value="MGI"/>
      <property name="gff3.dataSourceName" value="MGI"/>
      <property name="gff3.seqClsName" value="Chromosome"/>
      <property name="gff3.dataSetTitle" value="Mus musculus genome"/>
      <property name="src.data.dir" location="/Users/jer/work/mouseminedata/gff/"/>
    </source>
-->

     <source name="homologene" type="homologene">
       <property name="src.data.dir" location="&mm_data;/homologene/latest"/>
       <property name="homologene.organisms" value="7227 9606 10090 10116 7955 4932 6239"/>
     </source>

    <source name="panther" type="panther">
       <property name="src.data.dir" location="&mm_data;/panther/latest"/>
       <property name="panther.organisms" value="7227 9606 10090 10116 7955 6239 4932"/>
     </source>

    <source name="entrez-organism" type="entrez-organism">
	<property name="src.data.file" location="build/organisms.xml"/>
    </source>

    <source name="update-publications" type="update-publications" >
        <property name="src.data.file" location="build/publication.xml"/>
        <property name="cacheDirName" value="/var/lib/jenkins/pubCache/"/>
    </source>

  </sources>

  <post-processing>
	
    <!-- this runs the postprocessing steps in all sources -->
    <post-process name="do-sources"/>

    <post-process name="create-references"/>
<!-- Don't bother with transfer-sequences yet, since we don't have any sequences to transfer.
     Don't create intergenic regions for now.
    <post-process name="transfer-sequences"/>
    <post-process name="create-intergenic-region-features"/>
-->
    <post-process name="create-chromosome-locations-and-lengths"/>
    <post-process name="create-bioseg-location-index"/>
    <post-process name="create-overlap-view"/>
<!--
    Don't create flanking regions for now.
    <post-process name="create-gene-flanking-features"/>
-->
    <post-process name="summarise-objectstore"/>
    <post-process name="create-autocomplete-index"/>
    <post-process name="create-search-index"/>
    <post-process name="create-attribute-indexes"/>
		
  </post-processing>

</project>

